<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2024, QIIME 2 development team.

Distributed under the terms of the Modified BSD License. (SPDX: BSD-3-Clause)
-->
<!--
This tool was automatically generated by:
    q2galaxy (version: 2024.10.0)
for:
    qiime2 (version: 2024.10.0)
-->
<tool name="qiime2 rescript parse-silva-taxonomy" id="qiime2__rescript__parse_silva_taxonomy" version="2024.10.0+q2galaxy.2024.10.0" profile="22.05" license="BSD-3-Clause">
    <description>Generates a SILVA fixed-rank taxonomy.</description>
    <xrefs>
        <xref type="bio.tools">qiime2</xref>
    </xrefs>
    <requirements>
        <container type="docker">quay.io/qiime2/amplicon:2024.10</container>
    </requirements>
    <version_command>q2galaxy version rescript</version_command>
    <command detect_errors="exit_code">q2galaxy run rescript parse_silva_taxonomy '$inputs'</command>
    <configfiles>
        <inputs name="inputs" data_style="staging_path_and_source_path"/>
    </configfiles>
    <inputs>
        <param name="taxonomy_tree" type="data" format="qza" label="taxonomy_tree: Phylogeny[Rooted]" help="[required]  SILVA hierarchical taxonomy tree. The SILVA release filename typically takes the form of: 'tax_slv_ssu_X.tre', where 'X' is the SILVA version number.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="Phylogeny[Rooted]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['Phylogeny[Rooted]']</validator>
        </param>
        <param name="taxonomy_map" type="data" format="qza" label="taxonomy_map: FeatureData[SILVATaxidMap]" help="[required]  SILVA taxonomy map. This file contains a mapping of the sequence accessions to the numeric taxonomy identifiers and species label information. The SILVA release filename is typically in the form of: 'taxmap_slv_ssu_ref_X.txt', or 'taxmap_slv_ssu_ref_nr_X.txt' where 'X' is the SILVA version number.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="FeatureData[SILVATaxidMap]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureData[SILVATaxidMap]']</validator>
        </param>
        <param name="taxonomy_ranks" type="data" format="qza" label="taxonomy_ranks: FeatureData[SILVATaxonomy]" help="[required]  SILVA taxonomy file. This file contains the taxonomic rank information for each numeric taxonomy identifier and the taxonomy. The SILVA  filename typically takes the form of: 'tax_slv_ssu_X.txt', where 'X' is the SILVA version number.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="FeatureData[SILVATaxonomy]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureData[SILVATaxonomy]']</validator>
        </param>
        <section name="__q2galaxy__GUI__section__extra_opts__" title="Click here for additional options">
            <param name="rank_propagation" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" checked="true" label="rank_propagation: Bool" help="[default: Yes]  If a rank has no taxonomy associated with it, the taxonomy from the upper-level rank of that lineage, will be propagated downward. For example, if we are missing the genus label for 'f__Pasteurellaceae; g__'then the 'f__' rank will be propagated to become: 'f__Pasteurellaceae; g__Pasteurellaceae'."/>
            <repeat name="ranks" help="[optional]  List of taxonomic ranks for building a taxonomy from the SILVA Taxonomy database. Use 'include_species_labels' to append the organism name as the species label. [default: 'domain', 'phylum', 'class', 'order', 'family', 'genus']" title="ranks: List[Str % Choices('domain', 'superkingdom', 'kingdom', 'subkingdom', 'superphylum', 'phylum', 'subphylum', 'infraphylum', 'superclass', 'class', 'subclass', 'infraclass', 'superorder', 'order', 'suborder', 'superfamily', 'family', 'subfamily', 'genus')]">
                <param name="element" type="select" label="element: Str % Choices('domain', 'superkingdom', 'kingdom', 'subkingdom', 'superphylum', 'phylum', 'subphylum', 'infraphylum', 'superclass', 'class', 'subclass', 'infraclass', 'superorder', 'order', 'suborder', 'superfamily', 'family', 'subfamily', 'genus')">
                    <option value="__q2galaxy__::literal::None">Selection required</option>
                    <option value="domain">domain</option>
                    <option value="superkingdom">superkingdom</option>
                    <option value="kingdom">kingdom</option>
                    <option value="subkingdom">subkingdom</option>
                    <option value="superphylum">superphylum</option>
                    <option value="phylum">phylum</option>
                    <option value="subphylum">subphylum</option>
                    <option value="infraphylum">infraphylum</option>
                    <option value="superclass">superclass</option>
                    <option value="class">class</option>
                    <option value="subclass">subclass</option>
                    <option value="infraclass">infraclass</option>
                    <option value="superorder">superorder</option>
                    <option value="order">order</option>
                    <option value="suborder">suborder</option>
                    <option value="superfamily">superfamily</option>
                    <option value="family">family</option>
                    <option value="subfamily">subfamily</option>
                    <option value="genus">genus</option>
                    <validator type="expression" message="Please verify this parameter.">value != '__q2galaxy__::literal::None'</validator>
                </param>
            </repeat>
            <param name="include_species_labels" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" label="include_species_labels: Bool" help="[default: No]  Include species rank labels in taxonomy output. Note: species-labels may not be reliable in all cases."/>
        </section>
    </inputs>
    <outputs>
        <data name="taxonomy" format="qza" label="${tool.name} on ${on_string}: taxonomy.qza" from_work_dir="taxonomy.qza"/>
    </outputs>
    <tests/>
    <help>
QIIME 2: rescript parse-silva-taxonomy
======================================
Generates a SILVA fixed-rank taxonomy.


Outputs:
--------
:taxonomy.qza: The resulting fixed-rank formatted SILVA taxonomy.

|  

Description:
------------
Parses several files from the SILVA reference database to produce a GreenGenes-like fixed rank taxonomy that is 6 or 7 ranks deep, depending on whether or not `include_species_labels` is applied. The generated ranks (and the rank handles used to label these ranks in the resulting taxonomy) are: domain (d__), phylum (p__), class (c__), order (o__), family (f__), genus (g__), and species (s__). NOTE: THIS ACTION ACQUIRES DATA FROM THE SILVA DATABASE. SEE https://www.arb-silva.de/silva-license-information/ FOR MORE INFORMATION and be aware that earlier versions may be released under a different license.


|  

</help>
    <citations>
        <citation type="bibtex">@article{cite1,
 author = {Pruesse, Elmar and Quast, Christian and Knittel, Katrin and Fuchs, Bernhard M and Ludwig, Wolfgang and Peplies, Jorg and Glockner, Frank Oliver},
 journal = {Nucleic Acids Res},
 number = {21},
 pages = {7188-7196},
 title = {SILVA: a comprehensive online resource for quality checked and aligned ribosomal RNA sequence data compatible with ARB},
 volume = {35},
 year = {2007}
}
</citation>
        <citation type="bibtex">@article{cite2,
 author = {Quast, Christian and Pruesse, Elmar and Yilmaz, Pelin and Gerken, Jan and Schweer, Timmy and Yarza, Pablo and Peplies, Jorg and Glockner, Frank Oliver},
 journal = {Nucleic Acids Res},
 number = {Database issue},
 pages = {D590-6},
 publisher = {Oxford University Press},
 title = {The SILVA ribosomal RNA gene database project: improved data processing and web-based tools},
 volume = {41},
 year = {2013}
}
</citation>
        <citation type="doi">10.1371/journal.pcbi.1009581</citation>
        <citation type="doi">10.1038/s41587-019-0209-9</citation>
    </citations>
</tool>
