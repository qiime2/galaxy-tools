<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2024, QIIME 2 development team.

Distributed under the terms of the Modified BSD License. (SPDX: BSD-3-Clause)
-->
<!--
This tool was automatically generated by:
    q2galaxy (version: 2024.10.0)
for:
    qiime2 (version: 2024.10.0)
-->
<tool name="qiime2 rescript get-ncbi-data-protein" id="qiime2__rescript__get_ncbi_data_protein" version="2024.10.0+q2galaxy.2024.10.0" profile="22.05" license="BSD-3-Clause">
    <description>Download, parse, and import NCBI protein sequences and taxonomies</description>
    <xrefs>
        <xref type="bio.tools">qiime2</xref>
    </xrefs>
    <requirements>
        <container type="docker">quay.io/qiime2/amplicon:2024.10</container>
    </requirements>
    <version_command>q2galaxy version rescript</version_command>
    <command detect_errors="exit_code">q2galaxy run rescript get_ncbi_data_protein '$inputs'</command>
    <configfiles>
        <inputs name="inputs" data_style="staging_path_and_source_path"/>
    </configfiles>
    <inputs>
        <section name="__q2galaxy__GUI__section__extra_opts__" title="Click here for additional options">
            <conditional name="__q2galaxy__GUI__conditional__query__" label="query: Str">
                <param name="__q2galaxy__GUI__select__" type="select" label="query: Str" help="[optional]  Query on the NCBI Protein database">
                    <option value="__q2galaxy__::control::default" selected="true">None (Use default behavior)</option>
                    <option value="__q2galaxy__::control::provide">Provide a value</option>
                </param>
                <when value="__q2galaxy__::control::default">
                    <param name="query" type="hidden" value="__q2galaxy__::literal::None"/>
                </when>
                <when value="__q2galaxy__::control::provide">
                    <param name="query" type="text">
                        <sanitizer>
                            <valid initial="string.printable"/>
                        </sanitizer>
                    </param>
                </when>
            </conditional>
            <repeat name="accession_ids" help="[optional]  List of accession ids for sequences in the NCBI Protein database." title="accession_ids: Metadata">
                <conditional name="__q2galaxy__GUI__conditional__accession_ids__">
                    <param name="type" type="select" label="accession_ids: Metadata">
                        <option value="tsv" selected="true">Metadata from TSV</option>
                        <option value="qza">Metadata from Artifact</option>
                    </param>
                    <when value="tsv">
                        <param name="source" type="data" format="tabular,qiime2.tabular" label="Metadata Source"/>
                    </when>
                    <when value="qza">
                        <param name="source" type="data" format="qza" label="Metadata Source"/>
                    </when>
                </conditional>
            </repeat>
            <repeat name="ranks" help="[optional]  List of taxonomic ranks for building a taxonomy from the NCBI Taxonomy database. [default: 'kingdom', 'phylum', 'class', 'order', 'family', 'genus', 'species']" title="ranks: List[Str % Choices('domain', 'superkingdom', 'kingdom', 'subkingdom', 'superphylum', 'phylum', 'subphylum', 'infraphylum', 'superclass', 'class', 'subclass', 'infraclass', 'cohort', 'superorder', 'order', 'suborder', 'infraorder', 'parvorder', 'superfamily', 'family', 'subfamily', 'tribe', 'subtribe', 'genus', 'subgenus', 'species group', 'species subgroup', 'species', 'subspecies', 'forma')]">
                <param name="element" type="select" label="element: Str % Choices('domain', 'superkingdom', 'kingdom', 'subkingdom', 'superphylum', 'phylum', 'subphylum', 'infraphylum', 'superclass', 'class', 'subclass', 'infraclass', 'cohort', 'superorder', 'order', 'suborder', 'infraorder', 'parvorder', 'superfamily', 'family', 'subfamily', 'tribe', 'subtribe', 'genus', 'subgenus', 'species group', 'species subgroup', 'species', 'subspecies', 'forma')">
                    <option value="__q2galaxy__::literal::None">Selection required</option>
                    <option value="domain">domain</option>
                    <option value="superkingdom">superkingdom</option>
                    <option value="kingdom">kingdom</option>
                    <option value="subkingdom">subkingdom</option>
                    <option value="superphylum">superphylum</option>
                    <option value="phylum">phylum</option>
                    <option value="subphylum">subphylum</option>
                    <option value="infraphylum">infraphylum</option>
                    <option value="superclass">superclass</option>
                    <option value="class">class</option>
                    <option value="subclass">subclass</option>
                    <option value="infraclass">infraclass</option>
                    <option value="cohort">cohort</option>
                    <option value="superorder">superorder</option>
                    <option value="order">order</option>
                    <option value="suborder">suborder</option>
                    <option value="infraorder">infraorder</option>
                    <option value="parvorder">parvorder</option>
                    <option value="superfamily">superfamily</option>
                    <option value="family">family</option>
                    <option value="subfamily">subfamily</option>
                    <option value="tribe">tribe</option>
                    <option value="subtribe">subtribe</option>
                    <option value="genus">genus</option>
                    <option value="subgenus">subgenus</option>
                    <option value="species group">species group</option>
                    <option value="species subgroup">species subgroup</option>
                    <option value="species">species</option>
                    <option value="subspecies">subspecies</option>
                    <option value="forma">forma</option>
                    <validator type="expression" message="Please verify this parameter.">value != '__q2galaxy__::literal::None'</validator>
                </param>
            </repeat>
            <param name="rank_propagation" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" checked="true" label="rank_propagation: Bool" help="[default: Yes]  Propagate known ranks to missing ranks if true"/>
            <param name="logging_level" type="select" label="logging_level: Str % Choices('DEBUG', 'INFO', 'WARNING', 'ERROR', 'CRITICAL')">
                <option value="__q2galaxy__::literal::None" selected="true">None (Use default behavior)</option>
                <option value="DEBUG">DEBUG</option>
                <option value="INFO">INFO</option>
                <option value="WARNING">WARNING</option>
                <option value="ERROR">ERROR</option>
                <option value="CRITICAL">CRITICAL</option>
            </param>
            <param name="n_jobs" type="integer" min="1" value="1" label="n_jobs: Int % Range(1, None)" help="[default: 1]  Number of concurrent download connections. More is faster until you run out of bandwidth."/>
        </section>
    </inputs>
    <outputs>
        <data name="sequences" format="qza" label="${tool.name} on ${on_string}: sequences.qza" from_work_dir="sequences.qza"/>
        <data name="taxonomy" format="qza" label="${tool.name} on ${on_string}: taxonomy.qza" from_work_dir="taxonomy.qza"/>
    </outputs>
    <tests/>
    <help>
QIIME 2: rescript get-ncbi-data-protein
=======================================
Download, parse, and import NCBI protein sequences and taxonomies


Outputs:
--------
:sequences.qza: Sequences from the NCBI Protein database
:taxonomy.qza: Taxonomies from the NCBI Taxonomy database

|  

Description:
------------
Download and import sequences from the NCBI Protein database and download, parse, and import the corresponding taxonomies from the NCBI Taxonomy database.

Please be aware of the NCBI Disclaimer and Copyright notice (https://www.ncbi.nlm.nih.gov/home/about/policies/), particularly "run retrieval scripts on weekends or between 9 pm and 5 am Eastern Time weekdays for any series of more than 100 requests". As a rough guide, if you are downloading more than 125,000 sequences, only run this method at those times.

The NCBI servers can be capricious but reward polite persistence. If the download fails and gives you a message that contains the words "Last exception was ReadTimeout", you should probably try again, maybe with more connections. If it fails for any other reason, please create an issue at https://github.com/bokulich-lab/RESCRIPt.


|  

</help>
    <citations>
        <citation type="doi">10.1093/nar/gkx1095</citation>
        <citation type="bibtex">@article{cite2,
 author = {Benson, Dennis A and Cavanaugh, Mark and Clark, Karen and Karsch-Mizrachi, Ilene and Lipman, David J and Ostell, James and Sayers, Eric W},
 journal = {Nucleic acids research},
 number = {D1},
 pages = {D36--D42},
 publisher = {Oxford University Press},
 title = {GenBank},
 volume = {41},
 year = {2012}
}
</citation>
        <citation type="doi">10.1371/journal.pcbi.1009581</citation>
        <citation type="doi">10.1038/s41587-019-0209-9</citation>
    </citations>
</tool>
