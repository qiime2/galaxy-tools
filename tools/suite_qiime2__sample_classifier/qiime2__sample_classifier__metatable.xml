<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2025, QIIME 2 development team.

Distributed under the terms of the Modified BSD License. (SPDX: BSD-3-Clause)
-->
<!--
This tool was automatically generated by:
    q2galaxy (version: 2025.7.0)
for:
    qiime2 (version: 2025.7.0)
-->
<tool name="qiime2 sample-classifier metatable" id="qiime2__sample_classifier__metatable" version="2025.7.0+q2galaxy.2025.7.0" profile="22.05" license="BSD-3-Clause">
    <description>Convert (and merge) positive numeric metadata (in)to feature table.</description>
    <xrefs>
        <xref type="bio.tools">qiime2</xref>
    </xrefs>
    <requirements>
        <container type="docker">quay.io/qiime2/amplicon:2025.7</container>
    </requirements>
    <version_command>q2galaxy version sample_classifier</version_command>
    <command detect_errors="exit_code">q2galaxy run sample_classifier metatable '$inputs'</command>
    <configfiles>
        <inputs name="inputs" data_style="staging_path_and_source_path"/>
    </configfiles>
    <inputs>
        <repeat name="metadata" min="1" help="[required]  Metadata file to convert to feature table." title="metadata: Metadata">
            <conditional name="__q2galaxy__GUI__conditional__metadata__">
                <param name="type" type="select" label="metadata: Metadata">
                    <option value="tsv" selected="true">Metadata from TSV</option>
                    <option value="qza">Metadata from Artifact</option>
                </param>
                <when value="tsv">
                    <param name="source" type="data" format="tabular,qiime2.tabular" label="Metadata Source"/>
                </when>
                <when value="qza">
                    <param name="source" type="data" format="qza" label="Metadata Source"/>
                </when>
            </conditional>
        </repeat>
        <section name="__q2galaxy__GUI__section__extra_opts__" title="Click here for additional options">
            <param name="table" type="data" format="qza" optional="true" label="table: FeatureTable[Frequency | RelativeFrequency | PresenceAbsence | Composition]" help="[optional]  Feature table containing all features that should be used for target prediction.">
                <options options_filter_attribute="metadata.semantic_type">
                    <filter type="add_value" value="FeatureTable[PresenceAbsence]"/>
                    <filter type="add_value" value="FeatureTable[Composition]"/>
                    <filter type="add_value" value="FeatureTable[RelativeFrequency]"/>
                    <filter type="add_value" value="FeatureTable[Frequency]"/>
                </options>
                <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureTable[Composition]', 'FeatureTable[Frequency]', 'FeatureTable[PresenceAbsence]', 'FeatureTable[RelativeFrequency]']</validator>
            </param>
            <param name="missing_samples" type="select" label="missing_samples: Str % Choices('error', 'ignore')" display="radio">
                <option value="error">error</option>
                <option value="ignore" selected="true">ignore</option>
            </param>
            <param name="missing_values" type="select" label="missing_values: Str % Choices('drop_samples', 'drop_features', 'error', 'fill')" display="radio">
                <option value="drop_samples">drop_samples</option>
                <option value="drop_features">drop_features</option>
                <option value="error" selected="true">error</option>
                <option value="fill">fill</option>
            </param>
            <param name="drop_all_unique" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" label="drop_all_unique: Bool" help="[default: No]  If True, columns that contain a unique value for every ID will be dropped."/>
        </section>
    </inputs>
    <outputs>
        <data name="converted_table" format="qza" label="${tool.name} on ${on_string}: converted_table.qza" from_work_dir="converted_table.qza"/>
    </outputs>
    <tests/>
    <help>
QIIME 2: sample-classifier metatable
====================================
Convert (and merge) positive numeric metadata (in)to feature table.


Outputs:
--------
:converted_table.qza: Converted feature table

|  

Description:
------------
Convert numeric sample metadata from TSV file into a feature table. Optionally merge with an existing feature table. Only numeric metadata will be converted; categorical columns will be silently dropped. By default, if a table is used as input only samples found in both the table and metadata (intersection) are merged, and others are silently dropped. Set missing_samples="error" to raise an error if samples found in the table are missing from the metadata file. The metadata file can always contain a superset of samples. Note that columns will be dropped if they are non-numeric, contain no unique values (zero variance), contain only empty cells, or contain negative values. This method currently only converts postive numeric metadata into feature data. Tip: convert categorical columns to dummy variables to include them in the output feature table.


|  

</help>
    <citations>
        <citation type="doi">10.21105/joss.00934</citation>
        <citation type="bibtex">@article{cite2,
 author = {Pedregosa, Fabian and Varoquaux, Gaël and Gramfort, Alexandre and Michel, Vincent and Thirion, Bertrand and Grisel, Olivier and Blondel, Mathieu and Prettenhofer, Peter and Weiss, Ron and Dubourg, Vincent and Vanderplas, Jake and Passos, Alexandre and Cournapeau, David and Brucher, Matthieu and Perrot, Matthieu and Duchesnay, Édouard},
 journal = {Journal of machine learning research},
 number = {Oct},
 pages = {2825--2830},
 title = {Scikit-learn: Machine learning in Python},
 volume = {12},
 year = {2011}
}
</citation>
        <citation type="doi">10.1038/s41587-019-0209-9</citation>
    </citations>
</tool>
