<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2024, QIIME 2 development team.

Distributed under the terms of the Modified BSD License. (SPDX: BSD-3-Clause)
-->
<!--
This tool was automatically generated by:
    q2galaxy (version: 2024.10.0)
for:
    qiime2 (version: 2024.10.1)
-->
<tool name="qiime2 longitudinal plot-feature-volatility" id="qiime2__longitudinal__plot_feature_volatility" version="2024.10.0+q2galaxy.2024.10.0" profile="22.05" license="BSD-3-Clause">
    <description>Plot longitudinal feature volatility and importances</description>
    <xrefs>
        <xref type="bio.tools">qiime2</xref>
    </xrefs>
    <requirements>
        <container type="docker">quay.io/qiime2/amplicon:2024.10</container>
    </requirements>
    <version_command>q2galaxy version longitudinal</version_command>
    <command detect_errors="exit_code">q2galaxy run longitudinal plot_feature_volatility '$inputs'</command>
    <configfiles>
        <inputs name="inputs" data_style="staging_path_and_source_path"/>
    </configfiles>
    <inputs>
        <param name="table" type="data" format="qza" label="table: FeatureTable[RelativeFrequency]" help="[required]  Feature table containing features found in importances.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="FeatureTable[RelativeFrequency]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureTable[RelativeFrequency]']</validator>
        </param>
        <param name="importances" type="data" format="qza" label="importances: FeatureData[Importance]" help="[required]  Feature importance scores.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="FeatureData[Importance]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureData[Importance]']</validator>
        </param>
        <repeat name="metadata" min="1" help="[required]  Sample metadata file containing individual_id_column." title="metadata: Metadata">
            <conditional name="__q2galaxy__GUI__conditional__metadata__">
                <param name="type" type="select" label="metadata: Metadata">
                    <option value="tsv" selected="true">Metadata from TSV</option>
                    <option value="qza">Metadata from Artifact</option>
                </param>
                <when value="tsv">
                    <param name="source" type="data" format="tabular,qiime2.tabular" label="Metadata Source"/>
                </when>
                <when value="qza">
                    <param name="source" type="data" format="qza" label="Metadata Source"/>
                </when>
            </conditional>
        </repeat>
        <param name="state_column" type="text" label="state_column: Str" help="[required]  Metadata column containing state (time) variable information.">
            <sanitizer>
                <valid initial="string.printable"/>
            </sanitizer>
            <validator type="expression" message="Please verify this parameter.">value is not None and len(value) &gt; 0</validator>
        </param>
        <section name="__q2galaxy__GUI__section__extra_opts__" title="Click here for additional options">
            <conditional name="__q2galaxy__GUI__conditional__individual_id_column__" label="individual_id_column: Str">
                <param name="__q2galaxy__GUI__select__" type="select" label="individual_id_column: Str" help="[optional]  Metadata column containing IDs for individual subjects.">
                    <option value="__q2galaxy__::control::default" selected="true">None (Use default behavior)</option>
                    <option value="__q2galaxy__::control::provide">Provide a value</option>
                </param>
                <when value="__q2galaxy__::control::default">
                    <param name="individual_id_column" type="hidden" value="__q2galaxy__::literal::None"/>
                </when>
                <when value="__q2galaxy__::control::provide">
                    <param name="individual_id_column" type="text">
                        <sanitizer>
                            <valid initial="string.printable"/>
                        </sanitizer>
                    </param>
                </when>
            </conditional>
            <conditional name="__q2galaxy__GUI__conditional__default_group_column__" label="default_group_column: Str">
                <param name="__q2galaxy__GUI__select__" type="select" label="default_group_column: Str" help="[optional]  The default metadata column on which to separate groups for comparison (all categorical metadata columns will be available in the visualization).">
                    <option value="__q2galaxy__::control::default" selected="true">None (Use default behavior)</option>
                    <option value="__q2galaxy__::control::provide">Provide a value</option>
                </param>
                <when value="__q2galaxy__::control::default">
                    <param name="default_group_column" type="hidden" value="__q2galaxy__::literal::None"/>
                </when>
                <when value="__q2galaxy__::control::provide">
                    <param name="default_group_column" type="text">
                        <sanitizer>
                            <valid initial="string.printable"/>
                        </sanitizer>
                    </param>
                </when>
            </conditional>
            <param name="yscale" type="select" label="yscale: Str % Choices('linear', 'pow', 'sqrt', 'log')" display="radio">
                <option value="linear" selected="true">linear</option>
                <option value="pow">pow</option>
                <option value="sqrt">sqrt</option>
                <option value="log">log</option>
            </param>
            <conditional name="__q2galaxy__GUI__conditional__importance_threshold__">
                <param name="__q2galaxy__GUI__select__" type="select" label="importance_threshold: Float % Range(0, None, inclusive_start=False) | Str % Choices('q1', 'q2', 'q3')" help="[optional]  Filter feature table to exclude any features with an importance score less than this threshold. Set to &quot;q1&quot;, &quot;q2&quot;, or &quot;q3&quot; to select the first, second, or third quartile of values. Set to &quot;None&quot; to disable this filter.">
                    <option value="__q2galaxy__::literal::None" selected="true">None (Use default behavior)</option>
                    <option value="q1">q1 (Str)</option>
                    <option value="q2">q2 (Str)</option>
                    <option value="q3">q3 (Str)</option>
                    <option value="__q2galaxy__::control::Float X Range(0__comma__ None__comma__ inclusive_start=False)">Provide a value (Float % Range(0, None, inclusive_start=False))</option>
                </param>
                <when value="__q2galaxy__::literal::None">
                    <param name="importance_threshold" type="hidden" value="__q2galaxy__::literal::None"/>
                </when>
                <when value="q1">
                    <param name="importance_threshold" type="hidden" value="q1"/>
                </when>
                <when value="q2">
                    <param name="importance_threshold" type="hidden" value="q2"/>
                </when>
                <when value="q3">
                    <param name="importance_threshold" type="hidden" value="q3"/>
                </when>
                <when value="__q2galaxy__::control::Float X Range(0__comma__ None__comma__ inclusive_start=False)">
                    <param name="importance_threshold" type="float" min="1e-06" value="" label="importance_threshold: Float % Range(0, None, inclusive_start=False)" help="[required]  Filter feature table to exclude any features with an importance score less than this threshold. Set to &quot;q1&quot;, &quot;q2&quot;, or &quot;q3&quot; to select the first, second, or third quartile of values. Set to &quot;None&quot; to disable this filter."/>
                </when>
            </conditional>
            <conditional name="__q2galaxy__GUI__conditional__feature_count__">
                <param name="__q2galaxy__GUI__select__" type="select" label="feature_count: Int % Range(1, None) | Str % Choices('all')" help="[default: 100]  Filter feature table to include top N most important features. Set to &quot;all&quot; to include all features.">
                    <option value="all">all (Str)</option>
                    <option value="__q2galaxy__::control::Int X Range(1__comma__ None)" selected="true">Provide a value (Int % Range(1, None))</option>
                </param>
                <when value="all">
                    <param name="feature_count" type="hidden" value="all"/>
                </when>
                <when value="__q2galaxy__::control::Int X Range(1__comma__ None)">
                    <param name="feature_count" type="integer" min="1" value="100" label="feature_count: Int % Range(1, None)" help="[default: 100]  Filter feature table to include top N most important features. Set to &quot;all&quot; to include all features."/>
                </when>
            </conditional>
            <param name="missing_samples" type="select" label="missing_samples: Str % Choices('error', 'ignore')" display="radio">
                <option value="error" selected="true">error</option>
                <option value="ignore">ignore</option>
            </param>
        </section>
    </inputs>
    <outputs>
        <data name="visualization" format="qzv" label="${tool.name} on ${on_string}: visualization.qzv" from_work_dir="visualization.qzv"/>
    </outputs>
    <tests/>
    <help>
QIIME 2: longitudinal plot-feature-volatility
=============================================
Plot longitudinal feature volatility and importances


Outputs:
--------
:visualization.qzv: &lt;no description&gt;

|  

Description:
------------
Plots an interactive control chart of feature abundances (y-axis) in each sample across time (or state; x-axis). Feature importance scores and descriptive statistics for each feature are plotted in interactive bar charts below the control chart, facilitating exploration of longitudinal feature data. This visualization is intended for use with the feature-volatility pipeline; use that pipeline to access this visualization.


|  

</help>
    <citations>
        <citation type="doi">10.1128/mSystems.00219-18</citation>
        <citation type="doi">10.1038/s41587-019-0209-9</citation>
    </citations>
</tool>
