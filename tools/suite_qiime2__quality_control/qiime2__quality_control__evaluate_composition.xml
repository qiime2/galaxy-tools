<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2023, QIIME 2 development team.

Distributed under the terms of the Modified BSD License. (SPDX: BSD-3-Clause)
-->
<!--
This tool was automatically generated by:
    q2galaxy (version: 2022.11.1)
for:
    qiime2 (version: 2022.11.1)
-->
<tool name="qiime2 quality-control evaluate-composition" id="qiime2__quality_control__evaluate_composition" version="2022.11.1+q2galaxy.2022.11.1.2" profile="22.05" license="BSD-3-Clause">
    <description>Evaluate expected vs. observed taxonomic composition of samples</description>
    <requirements>
        <container type="docker">quay.io/qiime2/core:2022.11</container>
    </requirements>
    <version_command>q2galaxy version quality_control</version_command>
    <command detect_errors="exit_code">q2galaxy run quality_control evaluate_composition '$inputs'</command>
    <configfiles>
        <inputs name="inputs" data_style="paths"/>
    </configfiles>
    <inputs>
        <param name="expected_features" type="data" format="qza" label="expected_features: FeatureTable[RelativeFrequency]" help="[required]  Expected feature compositions">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="FeatureTable[RelativeFrequency]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureTable[RelativeFrequency]']</validator>
        </param>
        <param name="observed_features" type="data" format="qza" label="observed_features: FeatureTable[RelativeFrequency]" help="[required]  Observed feature compositions">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="FeatureTable[RelativeFrequency]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureTable[RelativeFrequency]']</validator>
        </param>
        <section name="__q2galaxy__GUI__section__extra_opts__" title="Click here for additional options">
            <param name="depth" type="integer" value="7" label="depth: Int" help="[default: 7]  Maximum depth of semicolon-delimited taxonomic ranks to test (e.g., 1 = root, 7 = species for the greengenes reference sequence database)."/>
            <param name="palette" type="select" label="palette: Str % Choices('Set1', 'Set2', 'Set3', 'Pastel1', 'Pastel2', 'Paired', 'Accent', 'Dark2', 'tab10', 'tab20', 'tab20b', 'tab20c', 'viridis', 'plasma', 'inferno', 'magma', 'terrain', 'rainbow')">
                <option value="Set1" selected="true">Set1</option>
                <option value="Set2">Set2</option>
                <option value="Set3">Set3</option>
                <option value="Pastel1">Pastel1</option>
                <option value="Pastel2">Pastel2</option>
                <option value="Paired">Paired</option>
                <option value="Accent">Accent</option>
                <option value="Dark2">Dark2</option>
                <option value="tab10">tab10</option>
                <option value="tab20">tab20</option>
                <option value="tab20b">tab20b</option>
                <option value="tab20c">tab20c</option>
                <option value="viridis">viridis</option>
                <option value="plasma">plasma</option>
                <option value="inferno">inferno</option>
                <option value="magma">magma</option>
                <option value="terrain">terrain</option>
                <option value="rainbow">rainbow</option>
            </param>
            <param name="plot_tar" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" checked="true" label="plot_tar: Bool" help="[default: Yes]  Plot taxon accuracy rate (TAR) on score plot. TAR is the number of true positive features divided by the total number of observed features (TAR = true positives / (true positives + false positives))."/>
            <param name="plot_tdr" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" checked="true" label="plot_tdr: Bool" help="[default: Yes]  Plot taxon detection rate (TDR) on score plot. TDR is the number of true positive features divided by the total number of expected features (TDR = true positives / (true positives + false negatives))."/>
            <param name="plot_r_value" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" label="plot_r_value: Bool" help="[default: No]  Plot expected vs. observed linear regression r value on score plot."/>
            <param name="plot_r_squared" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" checked="true" label="plot_r_squared: Bool" help="[default: Yes]  Plot expected vs. observed linear regression r-squared value on score plot."/>
            <param name="plot_bray_curtis" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" label="plot_bray_curtis: Bool" help="[default: No]  Plot expected vs. observed Bray-Curtis dissimilarity scores on score plot."/>
            <param name="plot_jaccard" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" label="plot_jaccard: Bool" help="[default: No]  Plot expected vs. observed Jaccard distances scores on score plot."/>
            <param name="plot_observed_features" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" label="plot_observed_features: Bool" help="[default: No]  Plot observed features count on score plot."/>
            <param name="plot_observed_features_ratio" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" checked="true" label="plot_observed_features_ratio: Bool" help="[default: Yes]  Plot ratio of observed:expected features on score plot."/>
            <conditional name="metadata">
                <param name="type" type="select" label="metadata: MetadataColumn[Categorical]" help="[optional]  Optional sample metadata that maps observed_features sample IDs to expected_features sample IDs.">
                    <option value="none" selected="true">None (default)</option>
                    <option value="tsv">Metadata from TSV</option>
                    <option value="qza">Metadata from Artifact</option>
                </param>
                <when value="none"/>
                <when value="tsv">
                    <param name="source" type="data" format="tabular,qiime2.tabular" label="Metadata Source"/>
                    <param name="column" type="data_column" label="Column Name" data_ref="source" use_header_names="true">
                        <validator type="expression" message="The first column cannot be selected (they are IDs).">value != "1"</validator>
                    </param>
                </when>
                <when value="qza">
                    <param name="source" type="data" format="qza" label="Metadata Source"/>
                    <param name="column" type="text" label="Column Name">
                        <validator type="empty_field"/>
                    </param>
                </when>
            </conditional>
        </section>
    </inputs>
    <outputs>
        <data name="visualization" format="qzv" label="${tool.name} on ${on_string}: visualization.qzv" from_work_dir="visualization.qzv"/>
    </outputs>
    <tests/>
    <help>
QIIME 2: quality-control evaluate-composition
=============================================
Evaluate expected vs. observed taxonomic composition of samples


Outputs:
--------
:visualization.qzv: &lt;no description&gt;

|  

Description:
------------
This visualizer compares the feature composition of pairs of observed and expected samples containing the same sample ID in two separate feature tables. Typically, feature composition will consist of taxonomy classifications or other semicolon-delimited feature annotations. Taxon accuracy rate, taxon detection rate, and linear regression scores between expected and observed observations are calculated at each semicolon-delimited rank, and plots of per-level accuracy and observation correlations are plotted. A histogram of distance between false positive observations and the nearest expected feature is also generated, where distance equals the number of rank differences between the observed feature and the nearest common lineage in the expected feature. This visualizer is most suitable for testing per-run data quality on sequencing runs that contain mock communities or other samples with known composition. Also suitable for sanity checks of bioinformatics pipeline performance.


|  

</help>
    <citations>
        <citation type="bibtex">@article{cite1,
 author = {Bokulich, Nicholas A and Kaehler, Benjamin D and Rideout, Jai Ram and Dillon, Matthew and Bolyen, Evan and Knight, Rob and Huttley, Gavin A and Caporaso, J Gregory},
 journal = {Microbiome},
 title = {Optimizing taxonomic classification of marker-gene amplicon sequences with QIIME 2's q2-feature-classifier plugin},
 volume = {In Press},
 year = {2018}
}
</citation>
        <citation type="doi">10.1038/s41587-019-0209-9</citation>
    </citations>
</tool>
