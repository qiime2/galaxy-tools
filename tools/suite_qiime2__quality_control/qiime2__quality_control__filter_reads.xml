<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2025, QIIME 2 development team.

Distributed under the terms of the Modified BSD License. (SPDX: BSD-3-Clause)
-->
<!--
This tool was automatically generated by:
    q2galaxy (version: 2025.4.0)
for:
    qiime2 (version: 2025.4.0)
-->
<tool name="qiime2 quality-control filter-reads" id="qiime2__quality_control__filter_reads" version="2025.4.0+q2galaxy.2025.4.0" profile="22.05" license="BSD-3-Clause">
    <description>Filter demultiplexed sequences by alignment to reference database.</description>
    <xrefs>
        <xref type="bio.tools">qiime2</xref>
    </xrefs>
    <requirements>
        <container type="docker">quay.io/qiime2/amplicon:2025.4</container>
    </requirements>
    <version_command>q2galaxy version quality_control</version_command>
    <command detect_errors="exit_code">q2galaxy run quality_control filter_reads '$inputs'</command>
    <configfiles>
        <inputs name="inputs" data_style="staging_path_and_source_path"/>
    </configfiles>
    <inputs>
        <param name="demultiplexed_sequences" type="data" format="qza" label="demultiplexed_sequences: SampleData[SequencesWithQuality¹ | PairedEndSequencesWithQuality²]" help="[required]  The sequences to be trimmed.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="SampleData[SequencesWithQuality]"/>
                <filter type="add_value" value="SampleData[PairedEndSequencesWithQuality]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['SampleData[PairedEndSequencesWithQuality]', 'SampleData[SequencesWithQuality]']</validator>
        </param>
        <param name="database" type="data" format="qza" label="database: Bowtie2Index" help="[required]  Bowtie2 indexed database.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="Bowtie2Index"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['Bowtie2Index']</validator>
        </param>
        <section name="__q2galaxy__GUI__section__extra_opts__" title="Click here for additional options">
            <param name="mode" type="select" label="mode: Str % Choices('local', 'global')" display="radio">
                <option value="local" selected="true">local</option>
                <option value="global">global</option>
            </param>
            <param name="sensitivity" type="select" label="sensitivity: Str % Choices('very-fast', 'fast', 'sensitive', 'very-sensitive')" display="radio">
                <option value="very-fast">very-fast</option>
                <option value="fast">fast</option>
                <option value="sensitive" selected="true">sensitive</option>
                <option value="very-sensitive">very-sensitive</option>
            </param>
            <param name="ref_gap_open_penalty" type="integer" min="1" value="5" label="ref_gap_open_penalty: Int % Range(1, None)" help="[default: 5]  Reference gap open penalty."/>
            <param name="ref_gap_ext_penalty" type="integer" min="1" value="3" label="ref_gap_ext_penalty: Int % Range(1, None)" help="[default: 3]  Reference gap extend penalty."/>
            <param name="exclude_seqs" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" checked="true" label="exclude_seqs: Bool" help="[default: Yes]  Exclude sequences that align to reference. Set this option to False to exclude sequences that do not align to the reference database."/>
        </section>
    </inputs>
    <outputs>
        <data name="filtered_sequences" format="qza" label="${tool.name} on ${on_string}: filtered_sequences.qza" from_work_dir="filtered_sequences.qza"/>
    </outputs>
    <tests/>
    <help>
QIIME 2: quality-control filter-reads
=====================================
Filter demultiplexed sequences by alignment to reference database.


Outputs:
--------
:filtered_sequences.qza: The resulting filtered sequences.

|  

Description:
------------
Filter out (or keep) demultiplexed single- or paired-end sequences that align to a reference database, using bowtie2 and samtools. This method can be used to filter out human DNA sequences and other contaminants in any FASTQ sequence data (e.g., shotgun genome or amplicon sequence data), or alternatively (when exclude_seqs is False) to only keep sequences that do align to the reference.


|  

</help>
    <citations>
        <citation type="bibtex">@article{cite1,
 author = {Langmead, Ben and Salzberg, Steven L},
 journal = {Nature methods},
 number = {4},
 pages = {357},
 publisher = {Nature Publishing Group},
 title = {Fast gapped-read alignment with Bowtie 2},
 volume = {9},
 year = {2012}
}
</citation>
        <citation type="doi">10.1093/bioinformatics/btp352</citation>
        <citation type="doi">10.1038/s41587-019-0209-9</citation>
    </citations>
</tool>
