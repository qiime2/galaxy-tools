<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2025, QIIME 2 development team.

Distributed under the terms of the Modified BSD License. (SPDX: BSD-3-Clause)
-->
<!--
This tool was automatically generated by:
    q2galaxy (version: 2025.10.0)
for:
    qiime2 (version: 2025.10.0)
-->
<tool name="qiime2 diversity core-metrics-phylogenetic" id="qiime2__diversity__core_metrics_phylogenetic" version="2025.10.0+q2galaxy.2025.10.0" profile="22.05" license="BSD-3-Clause">
    <description>Core diversity metrics (phylogenetic and non-phylogenetic)</description>
    <xrefs>
        <xref type="bio.tools">qiime2</xref>
    </xrefs>
    <requirements>
        <container type="docker">quay.io/qiime2/amplicon:2025.10</container>
    </requirements>
    <version_command>q2galaxy version diversity</version_command>
    <command detect_errors="exit_code">q2galaxy run diversity core_metrics_phylogenetic '$inputs'</command>
    <configfiles>
        <inputs name="inputs" data_style="staging_path_and_source_path"/>
    </configfiles>
    <inputs>
        <param name="table" type="data" format="qza" label="table: FeatureTable[Frequency]" help="[required]  The feature table containing the samples over which diversity metrics should be computed.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="FeatureTable[Frequency]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureTable[Frequency]']</validator>
        </param>
        <param name="phylogeny" type="data" format="qza" label="phylogeny: Phylogeny[Rooted]" help="[required]  Phylogenetic tree containing tip identifiers that correspond to the feature identifiers in the table. This tree can contain tip ids that are not present in the table, but all feature ids in the table must be present in this tree.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="Phylogeny[Rooted]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['Phylogeny[Rooted]']</validator>
        </param>
        <param name="sampling_depth" type="integer" min="1" value="" label="sampling_depth: Int % Range(1, None)" help="[required]  The total frequency that each sample should be rarefied to prior to computing diversity metrics."/>
        <repeat name="metadata" min="1" help="[required]  The sample metadata to use in the emperor plots." title="metadata: Metadata">
            <conditional name="__q2galaxy__GUI__conditional__metadata__">
                <param name="type" type="select" label="metadata: Metadata">
                    <option value="tsv" selected="true">Metadata from TSV</option>
                    <option value="qza">Metadata from Artifact</option>
                </param>
                <when value="tsv">
                    <param name="source" type="data" format="tabular,qiime2.tabular" label="Metadata Source"/>
                </when>
                <when value="qza">
                    <param name="source" type="data" format="qza" label="Metadata Source"/>
                </when>
            </conditional>
        </repeat>
        <section name="__q2galaxy__GUI__section__extra_opts__" title="Click here for additional options">
            <param name="with_replacement" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" label="with_replacement: Bool" help="[default: No]  Rarefy with replacement by sampling from the multinomial distribution instead of rarefying without replacement."/>
            <param name="ignore_missing_samples" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" label="ignore_missing_samples: Bool" help="[default: No]  If set to `True` samples and features without metadata are included by setting all metadata values to: &quot;This element has no metadata&quot;. By default an exception will be raised if missing elements are encountered. Note, this flag only takes effect if there is at least one overlapping element."/>
        </section>
    </inputs>
    <outputs>
        <data name="rarefied_table" format="qza" label="${tool.name} on ${on_string}: rarefied_table.qza" from_work_dir="rarefied_table.qza"/>
        <data name="faith_pd_vector" format="qza" label="${tool.name} on ${on_string}: faith_pd_vector.qza" from_work_dir="faith_pd_vector.qza"/>
        <data name="observed_features_vector" format="qza" label="${tool.name} on ${on_string}: observed_features_vector.qza" from_work_dir="observed_features_vector.qza"/>
        <data name="shannon_vector" format="qza" label="${tool.name} on ${on_string}: shannon_vector.qza" from_work_dir="shannon_vector.qza"/>
        <data name="evenness_vector" format="qza" label="${tool.name} on ${on_string}: evenness_vector.qza" from_work_dir="evenness_vector.qza"/>
        <data name="unweighted_unifrac_distance_matrix" format="qza" label="${tool.name} on ${on_string}: unweighted_unifrac_distance_matrix.qza" from_work_dir="unweighted_unifrac_distance_matrix.qza"/>
        <data name="weighted_unifrac_distance_matrix" format="qza" label="${tool.name} on ${on_string}: weighted_unifrac_distance_matrix.qza" from_work_dir="weighted_unifrac_distance_matrix.qza"/>
        <data name="jaccard_distance_matrix" format="qza" label="${tool.name} on ${on_string}: jaccard_distance_matrix.qza" from_work_dir="jaccard_distance_matrix.qza"/>
        <data name="bray_curtis_distance_matrix" format="qza" label="${tool.name} on ${on_string}: bray_curtis_distance_matrix.qza" from_work_dir="bray_curtis_distance_matrix.qza"/>
        <data name="unweighted_unifrac_pcoa_results" format="qza" label="${tool.name} on ${on_string}: unweighted_unifrac_pcoa_results.qza" from_work_dir="unweighted_unifrac_pcoa_results.qza"/>
        <data name="weighted_unifrac_pcoa_results" format="qza" label="${tool.name} on ${on_string}: weighted_unifrac_pcoa_results.qza" from_work_dir="weighted_unifrac_pcoa_results.qza"/>
        <data name="jaccard_pcoa_results" format="qza" label="${tool.name} on ${on_string}: jaccard_pcoa_results.qza" from_work_dir="jaccard_pcoa_results.qza"/>
        <data name="bray_curtis_pcoa_results" format="qza" label="${tool.name} on ${on_string}: bray_curtis_pcoa_results.qza" from_work_dir="bray_curtis_pcoa_results.qza"/>
        <data name="unweighted_unifrac_emperor" format="qzv" label="${tool.name} on ${on_string}: unweighted_unifrac_emperor.qzv" from_work_dir="unweighted_unifrac_emperor.qzv"/>
        <data name="weighted_unifrac_emperor" format="qzv" label="${tool.name} on ${on_string}: weighted_unifrac_emperor.qzv" from_work_dir="weighted_unifrac_emperor.qzv"/>
        <data name="jaccard_emperor" format="qzv" label="${tool.name} on ${on_string}: jaccard_emperor.qzv" from_work_dir="jaccard_emperor.qzv"/>
        <data name="bray_curtis_emperor" format="qzv" label="${tool.name} on ${on_string}: bray_curtis_emperor.qzv" from_work_dir="bray_curtis_emperor.qzv"/>
    </outputs>
    <tests/>
    <help>
QIIME 2: diversity core-metrics-phylogenetic
============================================
Core diversity metrics (phylogenetic and non-phylogenetic)


Outputs:
--------
:rarefied_table.qza: The resulting rarefied feature table.
:faith_pd_vector.qza: Vector of Faith PD values by sample.
:observed_features_vector.qza: Vector of Observed Features values by sample.
:shannon_vector.qza: Vector of Shannon diversity values by sample.
:evenness_vector.qza: Vector of Pielou's evenness values by sample.
:unweighted_unifrac_distance_matrix.qza: Matrix of unweighted UniFrac distances between pairs of samples.
:weighted_unifrac_distance_matrix.qza: Matrix of weighted UniFrac distances between pairs of samples.
:jaccard_distance_matrix.qza: Matrix of Jaccard distances between pairs of samples.
:bray_curtis_distance_matrix.qza: Matrix of Bray-Curtis distances between pairs of samples.
:unweighted_unifrac_pcoa_results.qza: PCoA matrix computed from unweighted UniFrac distances between samples.
:weighted_unifrac_pcoa_results.qza: PCoA matrix computed from weighted UniFrac distances between samples.
:jaccard_pcoa_results.qza: PCoA matrix computed from Jaccard distances between samples.
:bray_curtis_pcoa_results.qza: PCoA matrix computed from Bray-Curtis distances between samples.
:unweighted_unifrac_emperor.qzv: Emperor plot of the PCoA matrix computed from unweighted UniFrac.
:weighted_unifrac_emperor.qzv: Emperor plot of the PCoA matrix computed from weighted UniFrac.
:jaccard_emperor.qzv: Emperor plot of the PCoA matrix computed from Jaccard.
:bray_curtis_emperor.qzv: Emperor plot of the PCoA matrix computed from Bray-Curtis.

|  

Description:
------------
Applies a collection of diversity metrics (both phylogenetic and non-phylogenetic) to a feature table.


|  

</help>
    <citations>
        <citation type="doi">10.1038/s41587-019-0209-9</citation>
    </citations>
</tool>
