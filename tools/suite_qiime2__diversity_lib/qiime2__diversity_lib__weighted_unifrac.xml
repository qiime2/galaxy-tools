<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2024, QIIME 2 development team.

Distributed under the terms of the Modified BSD License. (SPDX: BSD-3-Clause)
-->
<!--
This tool was automatically generated by:
    q2galaxy (version: 2024.10.0)
for:
    qiime2 (version: 2024.10.1)
-->
<tool name="qiime2 diversity-lib weighted-unifrac" id="qiime2__diversity_lib__weighted_unifrac" version="2024.10.0+q2galaxy.2024.10.0" profile="22.05" license="BSD-3-Clause">
    <description>Weighted Unifrac</description>
    <xrefs>
        <xref type="bio.tools">qiime2</xref>
    </xrefs>
    <requirements>
        <container type="docker">quay.io/qiime2/amplicon:2024.10</container>
    </requirements>
    <version_command>q2galaxy version diversity_lib</version_command>
    <command detect_errors="exit_code">q2galaxy run diversity_lib weighted_unifrac '$inputs'</command>
    <configfiles>
        <inputs name="inputs" data_style="staging_path_and_source_path"/>
    </configfiles>
    <inputs>
        <param name="table" type="data" format="qza" label="table: FeatureTable[Frequency | RelativeFrequency]" help="[required]  The feature table containing the samples for which Weighted Unifrac should be computed.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="FeatureTable[Frequency]"/>
                <filter type="add_value" value="FeatureTable[RelativeFrequency]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureTable[Frequency]', 'FeatureTable[RelativeFrequency]']</validator>
        </param>
        <param name="phylogeny" type="data" format="qza" label="phylogeny: Phylogeny[Rooted]" help="[required]  Phylogenetic tree containing tip identifiers that correspond to the feature identifiers in the table. This tree can contain tip ids that are not present in the table, but all feature ids in the table must be present in this tree.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="Phylogeny[Rooted]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['Phylogeny[Rooted]']</validator>
        </param>
        <section name="__q2galaxy__GUI__section__extra_opts__" title="Click here for additional options">
            <param name="bypass_tips" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" label="bypass_tips: Bool" help="[default: No]  In a bifurcating tree, the tips make up about 50% of the nodes in a tree. By ignoring them, specificity can be traded for reduced compute time. This has the effect of collapsing the phylogeny, and is analogous (in concept) to moving from 99% to 97% OTUs"/>
        </section>
    </inputs>
    <outputs>
        <data name="distance_matrix" format="qza" label="${tool.name} on ${on_string}: distance_matrix.qza" from_work_dir="distance_matrix.qza"/>
    </outputs>
    <tests>
        <test>
            <param name="table" value="weighted_unifrac.test0.feature-table.qza" ftype="qza"/>
            <param name="phylogeny" value="weighted_unifrac.test0.phylogeny.qza" ftype="qza"/>
            <output name="distance_matrix" ftype="qza">
                <assert_contents>
                    <has_archive_member path="[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\/metadata.yaml">
                        <has_line_matching expression="type: DistanceMatrix"/>
                    </has_archive_member>
                </assert_contents>
            </output>
        </test>
        <test>
            <param name="table" value="weighted_unifrac.test1.feature-table.qza" ftype="qza"/>
            <param name="phylogeny" value="weighted_unifrac.test1.phylogeny.qza" ftype="qza"/>
            <output name="distance_matrix" ftype="qza">
                <assert_contents>
                    <has_archive_member path="[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\/metadata.yaml">
                        <has_line_matching expression="type: DistanceMatrix"/>
                    </has_archive_member>
                </assert_contents>
            </output>
        </test>
        <test>
            <param name="table" value="weighted_unifrac.test2.feature-table.qza" ftype="qza"/>
            <param name="phylogeny" value="weighted_unifrac.test2.phylogeny.qza" ftype="qza"/>
            <output name="distance_matrix" ftype="qza">
                <assert_contents>
                    <has_archive_member path="[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\/metadata.yaml">
                        <has_line_matching expression="type: DistanceMatrix"/>
                    </has_archive_member>
                </assert_contents>
            </output>
        </test>
        <test>
            <param name="table" value="weighted_unifrac.test3.feature-table.qza" ftype="qza"/>
            <param name="phylogeny" value="weighted_unifrac.test3.phylogeny.qza" ftype="qza"/>
            <param name="bypass_tips" value="__q2galaxy__::literal::True"/>
            <output name="distance_matrix" ftype="qza">
                <assert_contents>
                    <has_archive_member path="[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\/metadata.yaml">
                        <has_line_matching expression="type: DistanceMatrix"/>
                    </has_archive_member>
                </assert_contents>
            </output>
        </test>
    </tests>
    <help>
QIIME 2: diversity-lib weighted-unifrac
=======================================
Weighted Unifrac


Outputs:
--------
:distance_matrix.qza: Distance matrix for Unweighted Unifrac.

|  

Description:
------------
Compute Weighted Unifrac for each sample in a feature table

Examples:
---------

run on one core (by default)
****************************
Using the ``qiime2 diversity-lib weighted-unifrac`` tool:
 #. Set *"table"* to ``#: feature-table.qza``
 #. Set *"phylogeny"* to ``#: phylogeny.qza``
 #. Press the ``Execute`` button.

Once completed, for the new entry in your history, use the ``Edit`` button to set the name as follows:
 (Renaming is optional, but it will make any subsequent steps easier to complete.)

 .. list-table::
    :align: left
    :header-rows: 1

    * - History Name
      - *"Name"* to set (be sure to press ``Save``)
    * - ``#: qiime2 diversity-lib weighted-unifrac [...] : distance_matrix.qza``
      - ``weighted-unifrac-dm.qza``

to run on n cores, replace 1 here with your preferred integer
*************************************************************
Using the ``qiime2 diversity-lib weighted-unifrac`` tool:
 #. Set *"table"* to ``#: feature-table.qza``
 #. Set *"phylogeny"* to ``#: phylogeny.qza``
 #. Press the ``Execute`` button.

Once completed, for the new entry in your history, use the ``Edit`` button to set the name as follows:
 (Renaming is optional, but it will make any subsequent steps easier to complete.)

 .. list-table::
    :align: left
    :header-rows: 1

    * - History Name
      - *"Name"* to set (be sure to press ``Save``)
    * - ``#: qiime2 diversity-lib weighted-unifrac [...] : distance_matrix.qza``
      - ``weighted-unifrac-dm.qza``

use 'auto' to run on all of host system's available CPU cores
*************************************************************
Using the ``qiime2 diversity-lib weighted-unifrac`` tool:
 #. Set *"table"* to ``#: feature-table.qza``
 #. Set *"phylogeny"* to ``#: phylogeny.qza``
 #. Press the ``Execute`` button.

Once completed, for the new entry in your history, use the ``Edit`` button to set the name as follows:
 (Renaming is optional, but it will make any subsequent steps easier to complete.)

 .. list-table::
    :align: left
    :header-rows: 1

    * - History Name
      - *"Name"* to set (be sure to press ``Save``)
    * - ``#: qiime2 diversity-lib weighted-unifrac [...] : distance_matrix.qza``
      - ``weighted-unifrac-dm.qza``

use bypass_tips to trade specificity for reduced compute time
*************************************************************
| bypass_tips can be used with any threads setting, but auto may be a good choice if you're trimming run time.
Using the ``qiime2 diversity-lib weighted-unifrac`` tool:
 #. Set *"table"* to ``#: feature-table.qza``
 #. Set *"phylogeny"* to ``#: phylogeny.qza``
 #. Expand the ``additional options`` section

    - Set *"bypass_tips"* to ``Yes``

 #. Press the ``Execute`` button.

Once completed, for the new entry in your history, use the ``Edit`` button to set the name as follows:
 (Renaming is optional, but it will make any subsequent steps easier to complete.)

 .. list-table::
    :align: left
    :header-rows: 1

    * - History Name
      - *"Name"* to set (be sure to press ``Save``)
    * - ``#: qiime2 diversity-lib weighted-unifrac [...] : distance_matrix.qza``
      - ``weighted-unifrac-dm.qza``


|  

</help>
    <citations>
        <citation type="doi">10.1128/AEM.71.12.8228-8235.2005</citation>
        <citation type="doi">10.1128/AEM.01996-06</citation>
        <citation type="doi">10.1038/ismej.2009.97</citation>
        <citation type="doi">10.1038/ismej.2010.133</citation>
        <citation type="doi">10.1038/s41592-018-0187-8</citation>
        <citation type="doi">10.1038/s41587-019-0209-9</citation>
    </citations>
</tool>
