<?xml version='1.0' encoding='utf-8'?>
<!--
Copyright (c) 2023, QIIME 2 development team.

Distributed under the terms of the Modified BSD License. (SPDX: BSD-3-Clause)
-->
<!--
This tool was automatically generated by:
    q2galaxy (version: 2023.5.0)
for:
    qiime2 (version: 2023.5.1)
-->
<tool name="qiime2 diversity-lib unweighted-unifrac" id="qiime2__diversity_lib__unweighted_unifrac" version="2023.5.0+q2galaxy.2023.5.0.2" profile="22.05" license="BSD-3-Clause">
    <description>Unweighted Unifrac</description>
    <requirements>
        <container type="docker">quay.io/qiime2/core:2023.5</container>
    </requirements>
    <version_command>q2galaxy version diversity_lib</version_command>
    <command detect_errors="exit_code">q2galaxy run diversity_lib unweighted_unifrac '$inputs'</command>
    <configfiles>
        <inputs name="inputs" data_style="paths"/>
    </configfiles>
    <inputs>
        <param name="table" type="data" format="qza" label="table: FeatureTable[Frequency | RelativeFrequency | PresenceAbsence]" help="[required]  The feature table containing the samples for which Unweighted Unifrac should be computed.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="FeatureTable[RelativeFrequency]"/>
                <filter type="add_value" value="FeatureTable[Frequency]"/>
                <filter type="add_value" value="FeatureTable[PresenceAbsence]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['FeatureTable[Frequency]', 'FeatureTable[PresenceAbsence]', 'FeatureTable[RelativeFrequency]']</validator>
        </param>
        <param name="phylogeny" type="data" format="qza" label="phylogeny: Phylogeny[Rooted]" help="[required]  Phylogenetic tree containing tip identifiers that correspond to the feature identifiers in the table. This tree can contain tip ids that are not present in the table, but all feature ids in the table must be present in this tree.">
            <options options_filter_attribute="metadata.semantic_type">
                <filter type="add_value" value="Phylogeny[Rooted]"/>
            </options>
            <validator type="expression" message="Incompatible type">hasattr(value.metadata, "semantic_type") and value.metadata.semantic_type in ['Phylogeny[Rooted]']</validator>
        </param>
        <section name="__q2galaxy__GUI__section__extra_opts__" title="Click here for additional options">
            <conditional name="__q2galaxy__GUI__conditional__threads__">
                <param name="__q2galaxy__GUI__select__" type="select" label="threads: Int % Range(1, None) | Str % Choices('auto')" help="[default: 1]  The number of CPU threads to use in performing this calculation. May not exceed the number of available physical cores. If threads = 'auto', one thread will be created for each identified CPU core on the host.">
                    <option value="auto">auto (Str)</option>
                    <option value="__q2galaxy__::control::Int X Range(1__comma__ None)" selected="true">Provide a value (Int % Range(1, None))</option>
                </param>
                <when value="auto">
                    <param name="threads" type="hidden" value="auto"/>
                </when>
                <when value="__q2galaxy__::control::Int X Range(1__comma__ None)">
                    <param name="threads" type="integer" min="1" value="1" label="threads: Int % Range(1, None)" help="[default: 1]  The number of CPU threads to use in performing this calculation. May not exceed the number of available physical cores. If threads = 'auto', one thread will be created for each identified CPU core on the host."/>
                </when>
            </conditional>
            <param name="bypass_tips" type="boolean" truevalue="__q2galaxy__::literal::True" falsevalue="__q2galaxy__::literal::False" label="bypass_tips: Bool" help="[default: No]  In a bifurcating tree, the tips make up about 50% of the nodes in a tree. By ignoring them, specificity can be traded for reduced compute time. This has the effect of collapsing the phylogeny, and is analogous (in concept) to moving from 99% to 97% OTUs"/>
        </section>
    </inputs>
    <outputs>
        <data name="distance_matrix" format="qza" label="${tool.name} on ${on_string}: distance_matrix.qza" from_work_dir="distance_matrix.qza"/>
    </outputs>
    <tests>
        <test>
            <param name="table" value="unweighted_unifrac.test0.feature-table.qza" ftype="qza"/>
            <param name="phylogeny" value="unweighted_unifrac.test0.phylogeny.qza" ftype="qza"/>
            <output name="distance_matrix" ftype="qza">
                <assert_contents>
                    <has_archive_member path="[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\/metadata.yaml">
                        <has_line_matching expression="type: DistanceMatrix"/>
                    </has_archive_member>
                </assert_contents>
            </output>
        </test>
        <test>
            <param name="table" value="unweighted_unifrac.test1.feature-table.qza" ftype="qza"/>
            <param name="phylogeny" value="unweighted_unifrac.test1.phylogeny.qza" ftype="qza"/>
            <conditional name="__q2galaxy__GUI__conditional__threads__">
                <param name="__q2galaxy__GUI__select__" value="__q2galaxy__::control::Int X Range(1__comma__ None)"/>
                <param name="threads" value="1"/>
            </conditional>
            <output name="distance_matrix" ftype="qza">
                <assert_contents>
                    <has_archive_member path="[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\/metadata.yaml">
                        <has_line_matching expression="type: DistanceMatrix"/>
                    </has_archive_member>
                </assert_contents>
            </output>
        </test>
        <test>
            <param name="table" value="unweighted_unifrac.test2.feature-table.qza" ftype="qza"/>
            <param name="phylogeny" value="unweighted_unifrac.test2.phylogeny.qza" ftype="qza"/>
            <conditional name="__q2galaxy__GUI__conditional__threads__">
                <param name="__q2galaxy__GUI__select__" value="auto"/>
                <param name="threads" value="auto"/>
            </conditional>
            <output name="distance_matrix" ftype="qza">
                <assert_contents>
                    <has_archive_member path="[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\/metadata.yaml">
                        <has_line_matching expression="type: DistanceMatrix"/>
                    </has_archive_member>
                </assert_contents>
            </output>
        </test>
        <test>
            <param name="table" value="unweighted_unifrac.test3.feature-table.qza" ftype="qza"/>
            <param name="phylogeny" value="unweighted_unifrac.test3.phylogeny.qza" ftype="qza"/>
            <conditional name="__q2galaxy__GUI__conditional__threads__">
                <param name="__q2galaxy__GUI__select__" value="auto"/>
                <param name="threads" value="auto"/>
            </conditional>
            <param name="bypass_tips" value="__q2galaxy__::literal::True"/>
            <output name="distance_matrix" ftype="qza">
                <assert_contents>
                    <has_archive_member path="[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}\/metadata.yaml">
                        <has_line_matching expression="type: DistanceMatrix"/>
                    </has_archive_member>
                </assert_contents>
            </output>
        </test>
    </tests>
    <help>
QIIME 2: diversity-lib unweighted-unifrac
=========================================
Unweighted Unifrac


Outputs:
--------
:distance_matrix.qza: Distance matrix for Unweighted Unifrac.

|  

Description:
------------
Compute Unweighted Unifrac for each sample in a feature table

Examples:
---------

run on one core (by default)
****************************
Using the ``qiime2 diversity-lib unweighted-unifrac`` tool:
 #. Set *"table"* to ``#: feature-table.qza``
 #. Set *"phylogeny"* to ``#: phylogeny.qza``
 #. Press the ``Execute`` button.

Once completed, for the new entry in your history, use the ``Edit`` button to set the name as follows:
 (Renaming is optional, but it will make any subsequent steps easier to complete.)

 .. list-table::
    :align: left
    :header-rows: 1

    * - History Name
      - *"Name"* to set (be sure to press ``Save``)
    * - ``#: qiime2 diversity-lib unweighted-unifrac [...] : distance_matrix.qza``
      - ``unweighted-unifrac-dm.qza``

to run on n cores, replace 1 here with your preferred integer
*************************************************************
Using the ``qiime2 diversity-lib unweighted-unifrac`` tool:
 #. Set *"table"* to ``#: feature-table.qza``
 #. Set *"phylogeny"* to ``#: phylogeny.qza``
 #. Expand the ``additional options`` section

    - Leave *"threads"* as its default value of ``1``

 #. Press the ``Execute`` button.

Once completed, for the new entry in your history, use the ``Edit`` button to set the name as follows:
 (Renaming is optional, but it will make any subsequent steps easier to complete.)

 .. list-table::
    :align: left
    :header-rows: 1

    * - History Name
      - *"Name"* to set (be sure to press ``Save``)
    * - ``#: qiime2 diversity-lib unweighted-unifrac [...] : distance_matrix.qza``
      - ``unweighted-unifrac-dm.qza``

use 'auto' to run on all of host system's available CPU cores
*************************************************************
Using the ``qiime2 diversity-lib unweighted-unifrac`` tool:
 #. Set *"table"* to ``#: feature-table.qza``
 #. Set *"phylogeny"* to ``#: phylogeny.qza``
 #. Expand the ``additional options`` section

    - Set *"threads"* to ``auto``

 #. Press the ``Execute`` button.

Once completed, for the new entry in your history, use the ``Edit`` button to set the name as follows:
 (Renaming is optional, but it will make any subsequent steps easier to complete.)

 .. list-table::
    :align: left
    :header-rows: 1

    * - History Name
      - *"Name"* to set (be sure to press ``Save``)
    * - ``#: qiime2 diversity-lib unweighted-unifrac [...] : distance_matrix.qza``
      - ``unweighted-unifrac-dm.qza``

use bypass_tips to trade specificity for reduced compute time
*************************************************************
| bypass_tips can be used with any threads setting, but auto may be a good choice if you're trimming run time.
Using the ``qiime2 diversity-lib unweighted-unifrac`` tool:
 #. Set *"table"* to ``#: feature-table.qza``
 #. Set *"phylogeny"* to ``#: phylogeny.qza``
 #. Expand the ``additional options`` section

    #. Set *"threads"* to ``auto``
    #. Set *"bypass_tips"* to ``Yes``

 #. Press the ``Execute`` button.

Once completed, for the new entry in your history, use the ``Edit`` button to set the name as follows:
 (Renaming is optional, but it will make any subsequent steps easier to complete.)

 .. list-table::
    :align: left
    :header-rows: 1

    * - History Name
      - *"Name"* to set (be sure to press ``Save``)
    * - ``#: qiime2 diversity-lib unweighted-unifrac [...] : distance_matrix.qza``
      - ``unweighted-unifrac-dm.qza``


|  

</help>
    <citations>
        <citation type="doi">10.1128/AEM.71.12.8228-8235.2005</citation>
        <citation type="doi">10.1128/AEM.01996-06</citation>
        <citation type="doi">10.1038/ismej.2009.97</citation>
        <citation type="doi">10.1038/ismej.2010.133</citation>
        <citation type="doi">10.1038/s41592-018-0187-8</citation>
        <citation type="doi">10.1038/s41587-019-0209-9</citation>
    </citations>
</tool>
